# 实验六 实验报告：利用对象存储服务（实验报告）

## 一、实验目的

本次实验旨在掌握对象存储（OSS）的核心概念与实际应用方法，重点在于：
1. 理解对象存储与传统存储（如本地硬盘、U盘、网盘）的区别——它以“对象”为单位，通过 HTTP/HTTPS 接口访问，适合存储图片、视频等静态资源。
2. 学会在阿里云控制台创建存储桶（Bucket），完成文件的上传与公网访问。
3. 将 OSS 集成到自己的 **Java Web 项目**中，实现用户头像上传与实时展示功能，体会其在 Web 开发中的实际价值。

## 二、关键概念

- **对象存储（OSS）**：数据以“对象”形式存储，每个对象包含数据本身、元数据和唯一标识（Key）。通过标准 HTTP 接口访问。
- **存储桶（Bucket）**：对象的容器，名称需**全局唯一**。本次实验使用的 Bucket 名为 `java-ai-test-010`。
- **访问权限**：本次实验将 Bucket 设置为 **“公共读”**（即“公有”），这意味着任何人知道对象 URL 即可直接访问，便于前端直接加载图片。
- **对象 URL**：格式为 `https://<bucket-name>.<region-endpoint>/<object-name>`，例如：  
  `https://java-ai-test-010.oss-cn-beijing.aliyuncs.com/001.jpg`

## 三、实验准备

1. 已登录阿里云账号，具备 OSS 服务操作权限。
2. 准备测试图片：本地文件 `001.jpg`。
3. 已搭建好本地 Java Web 项目（Spring Boot + Vue），具备上传和展示用户头像的功能接口。
4. 确认已将阿里云 OSS 的 **AccessKey ID 和 Secret** 设置到环境变量。
5. 选择地域：**华北 2（北京）**，与西安市接近，降低延迟。

## 四、实验步骤与操作记录

1. **创建公有存储桶**  
   - 在阿里云 OSS 控制台点击“创建 Bucket”。
   - 名称：`java-ai-test-010`。
   - 地域：**华北2（北京）**。
   - 读写权限：**公共读**。
   - 存储类型：**标准存储**。

![1765282322389](image/实验报告/1765282322389.png)

2. **上传测试文件**  
   - 进入 Bucket，点击“上传文件”。
   - 选择本地 `001.jpg`，上传。
   - 上传成功后，在对象列表中可见该文件。

![1765282406606](image/实验报告/1765282406606.png)

3. **验证公网直接访问**  
   - 复制对象 URL：`https://java-ai-test-010.oss-cn-beijing.aliyuncs.com/001.jpg`。
   - 在浏览器新标签页打开，**图片直接下载**。

![1765282517063](image/实验报告/1765282517063.png)

4. **集成到 Java Web 项目**  
   - 按照阿里云官方 SDK 文档，集成到 java web 项目中。
   - 在后端使用 **aliyun-sdk-oss** 依赖，通过 AccessKey 初始化 OSSClient。
   - 实现头像上传接口：用户选择图片后，后端调用 `upload()` 方法将文件上传至 OSS。
   - 前端页面通过后端提供的数据库查询接口得到 OSS URL **直接展示头像**。
   - 刷新页面后，头像能**实时加载并显示**，无需项目服务器存储文件。

![1765283420067](image/实验报告/1765283420067.png)

## 五、实验结果

本次实验各项操作均顺利完成。

成功创建了名为 `java-ai-test-010` 的 Bucket，并将访问权限设置为“公共读”，确保上传的文件可通过公网直接访问。将本地准备的测试图片 `001.jpg` 成功上传至该存储桶的根目录。

通过浏览器直接访问该图片的 OSS URL，能够立即下载图片，验证了“公有读”权限已正确生效。

该 OSS 服务已成功集成到我的 Java Web 项目中：用户上传头像后，文件被存入 OSS，前端页面通过前端页面通过后端提供的数据库查询接口即可实时显示头像。

## 六、思考与体会

1. **为什么用 OSS 存头像？**  
   传统做法是把图片存到服务器的 `static/upload/` 目录下，但这样：  
   不利于多台服务器需共享存储、浪费应用服务器带宽和磁盘，并且备份和扩容麻烦。  
   而 OSS 天然支持高并发访问、自动冗余、按量计费，让 Web 应用更轻量化。

## 七、遇到的问题与解决方案

- **问题**：一开始误将 Bucket 设为“私有”，前端出现403错误，加载失败。  
  **解决**：将 Bucket 修改为“公共读”。

- **问题**：用户文件名相同时，文件被覆盖。
  **解决**：文件名使用 UUID + 后缀命名，避免了重名覆盖。

## 八、实验结论

本次实验成功完成了阿里云 OSS 的创建、文件上传、公网访问验证，并将其**集成到 Java Web 项目中实现用户头像功能**。通过实践，我深刻体会到对象存储在 Web 开发中的价值：**解耦静态资源、降低服务器负担、提升系统可扩展性**。  
未来在课程设计或实际项目中，我将优先考虑使用 OSS 存储图片、视频等静态内容，打造更健壮、更易维护的应用架构。
